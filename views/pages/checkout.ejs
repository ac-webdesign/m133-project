<%- contentFor('main-content') %>
<section class="section container">
    <h2 class="title has-text-black">Einkauf</h2>

    <form class="form" action="/checkout" method="POST">
        <div class="field">
            <label class="label">Vorname</label>
            <div class="control">
                <input class="input" type="text" name="firstname" placeholder="Vorname eingeben" required>
            </div>
            <p id="firstname-alert" class="alert">Bitte Vorname eingeben</p>
        </div>

        <div class="field">
            <label class="label">Nachname</label>
            <div class="control">
                <input class="input" type="text" name="lastname" placeholder="Nachname eingeben" required>
            </div>
            <p id="lastname-alert" class="alert">Bitte Nachname eingeben</p>
        </div>

        <div class="field">
            <label class="label">
                <i class="icon-mail-alt"></i>Email
            </label>
            <div class="control">
                <input class="input" type="email" name="email" placeholder="Email eingeben" required>
            </div>
            <p id="email-alert" class="alert">Bitte g√ºltige Email eingeben</p>
        </div>

        <div class="field is-grouped">
            <div class="control">
                <button id="checkout-button" class="button button-orange" disabled>
                    <i class="icon-basket"></i> Einkauf abschliessen
                </button>
            </div>
        </div>
    </form>
</section>

<script>
    // Fronted-Validation
    const formInputs = document.querySelectorAll('input');
    const button = document.getElementById('checkout-button');

    formInputs.forEach(formInput => {
        formInput.addEventListener('input', (e) => {
            const isInputValid = formInput.checkValidity() === true;
            const inputName = formInput.name;

            if (isInputValid) {
                toggleButtonDisabled();
                hiddenAlert(inputName);
            } else {
                toggleButtonDisabled();
                showAlert(inputName);
            }
        });
    });

    // Helper Functions: Fronted-Validation
    function showAlert(name) {
        const id = `${name}-alert`;
        document.getElementById(id).style.display = 'block';
    }

    function hiddenAlert(name) {
        const id = `${name}-alert`;
        document.getElementById(id).style.display = 'none';
    }

    function toggleButtonDisabled() {
        button.disabled = !button.disabled;
    }
</script>